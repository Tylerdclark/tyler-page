var rez=10,cols,rows,field=[],increment=.15,seed=Date.now(),zoff=0,openSimplex=openSimplexNoise(seed);function windowResized(){resizeCanvas(windowWidth,windowHeight);setup()}function setup(){canvas=createCanvas(windowWidth,windowHeight);canvas.position(0,0);canvas.style("z-index","-1");cols=1+width/rez;rows=1+height/rez}function drawLine(b,c){line(b.x,b.y,c.x,c.y)}
function draw(){clear();var b=frameRate();fill(255);stroke(0);text("FPS: "+b.toFixed(2),10,height-10);for(var c=0,d=0;d<cols;d++){field[d]=[];c+=increment;for(var f=0,e=0;e<rows;e++){var a=openSimplex.noise3D(c,f,zoff);field[d][e]=a;f+=increment}}zoff+=map(b,5,60,.005,.009);for(b=0;b<cols-1;b++)for(c=0;c<rows-1;c++){a=b*rez;var g=c*rez;d=new p5.Vector(a+.5*rez,g);f=new p5.Vector(a+rez,g+.5*rez);e=new p5.Vector(a+.5*rez,g+rez);a=new p5.Vector(a,g+.5*rez);g=ceil(field[b][c]);var h=ceil(field[b+1][c]),
k=ceil(field[b+1][c+1]),l=ceil(field[b][c+1]);g=8*g+4*h+2*k+1*l;colorMode(HSB,255,255,255);strokeWeight(4);stroke(map(g,0,15,0,360),200,255,255);switch(g){case 1:drawLine(e,a);break;case 2:drawLine(f,e);break;case 3:drawLine(f,a);break;case 4:drawLine(d,f);break;case 5:drawLine(d,a);drawLine(f,e);break;case 6:drawLine(d,e);break;case 7:drawLine(d,a);break;case 8:drawLine(d,a);break;case 9:drawLine(d,e);break;case 10:drawLine(d,f);drawLine(e,a);break;case 11:drawLine(d,f);break;case 12:drawLine(f,
a);break;case 13:drawLine(f,e);break;case 14:drawLine(e,a)}}};